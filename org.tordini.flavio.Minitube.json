{
    "app-id": "org.tordini.flavio.Minitube",
    "runtime": "org.kde.Platform",
    "runtime-version": "5.15-23.08",
    "sdk": "org.kde.Sdk",
    "command": "minitube",
    "rename-desktop-file": "minitube.desktop",
    "rename-appdata-file": "org.tordini.flavio.minitube.metainfo.xml",
    "rename-icon": "minitube",
    "copy-icon": true,	
    "finish-args": [
        "--socket=x11",
        "--share=ipc",
        "--share=network",
        "--socket=pulseaudio",
        "--device=dri",
        "--talk-name=org.freedesktop.ScreenSaver"
    ],
    "modules": [
    {
        "name" : "libmpv",
        "cleanup" : [
            "/include",
            "/lib/pkgconfig"
        ],
        "sources" : [
            {
                "type" : "archive",
                "url" : "https://github.com/mpv-player/mpv/archive/refs/tags/v0.37.0.tar.gz",
                "sha256" : "1d2d4adbaf048a2fa6ee134575032c4b2dad9a7efafd5b3e69b88db935afaddf",
                "type" : "archive",
                "url" : "https://github.com/haasn/libplacebo/archive/refs/tags/v6.338.2.tar.gz",
                "sha256" : "2f1e624e09d72a8c9db70f910f7560e764a1c126dae42acc5b3bcef836a7aec6"
            }
        ],
        "name" : "glad2",
        "buildsystem" : "simple",
        "build-commands" : [
            "python3 setup.py build"
        ],
        "sources" : [
            {
                "type" : "archive",
                "url" : "https://github.com/Dav1dde/glad/archive/refs/tags/v2.0.6.tar.gz",
                "sha256" : "61a70234dc7da467cceb07fcdd6dec1213d6143a1b6b19ccc5d7b64cc247ea47"
            }
        ],
        "modules" : [
            {
                "name" : "libass",
                "cleanup" : [
                    "/include",
                    "/lib/*.la",
                    "/lib/pkgconfig"
                ],
                "config-opts" : [
                    "--disable-static"
                ],
                "sources" : [
                    {
                        "type" : "archive",
                        "url" : "https://github.com/libass/libass/releases/download/0.17.1/libass-0.17.1.tar.gz",
                        "sha256" : "d653be97198a0543c69111122173c41a99e0b91426f9e17f06a858982c2fb03d"
                    }
                ],
                "modules" : [
                    {
                        "name" : "fribidi",
                        "cleanup" : [
                            "/bin",
                            "/include",
                            "/lib/pkgconfig",
                            "/lib/*.la",
                            "/share/man"
                        ],
                        "buildsystem" : "simple",
                        "build-commands" : [
                            "./autogen.sh",
                            "make -C lib"
                        ],
                        "sources" : [
                            {
                                "type" : "archive",
                                "url" : "https://github.com/fribidi/fribidi/archive/refs/tags/v1.0.13.tar.gz",
                                "sha256" : "f24e8e381bcf76533ae56bd776196f3a0369ec28e9c0fdb6edd163277e008314"
                            }
                        ]
                    }
                ]
            },
            {
                "name" : "ffmpeg",
                "cleanup" : [
                    "/include",
                    "/lib/pkgconfig",
                    "/share/ffmpeg/examples"
                ],
                "config-opts" : [
                    "--enable-shared",
                    "--disable-static",
                    "--enable-gnutls",
                    "--disable-doc",
                    "--disable-ffplay",
                    "--enable-version3",
                    "--disable-programs",
                    "--disable-encoders",
                    "--disable-muxers"
                ],
                "sources" : [
                    {
                        "type": "archive",
                        "url": "https://ffmpeg.org/releases/ffmpeg-4.4.4.tar.gz",
                        "sha256": "356268a89a6f763298eb2aaca731ac0e12ca15ff1e7784e44a3ca5be1d7f784c"
                    },
                    {
                        "type": "patch",
                        "path": "fix-operand-mismatch.patch"
                    }
                ]
            }
        ]
    },
    {
        "name": "minitube",
        "buildsystem": "qmake",
        "config-opts": [
            "CONFIG+=force_debug_info",
            "QMAKE_LIBDIR=/app/lib"
        ],
        "sources": [
            {
                "type": "git",
                "url": "https://github.com/flaviotordini/minitube.git",
                "tag": "3.9.3",
                "commit": "7d900faf983851ae1d203ae3fd3555514f86484e"
            },
            {
                "type": "patch",
                "path": "appdata.patch"
            }
        ]
    }
    ] 
}
